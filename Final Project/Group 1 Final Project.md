# Potential Aeration of Water Trickling Down a String
### Rosalie Krasnoff and Jiwon Lee
##### May 13th 2019

## Introduction and Objectives

Strings could provide an alternative "filter media" for a modified trickling filter in a wastewater treatment system. Trickling filters are a technology that have not been improved significantly since the 1970s or 80s, and there is great room for improvement of the efficiency of treatment and use of space by improving the design. There is a team of students at Cornell on AguaClara working on the development of a string digester for secondary wastewater treatment, which could potentially offer huge increases in energy and treatment efficiency. This design features wastewater being treated by biofilm as it trickles down string, in a design that would feature hundreds to thousands of strings hanging millimeters apart, each treating a trickle of wastewater.

The development of this project is still a work in progress, and key components of the design have yet to be verified. One aspect of the design that required experimentation to confirm proof of concept was the question of whether there would be enough oxygen available to the wastewater on the string to allow for proper treatment. This lab experiment was designed with the objective of determining whether aeration occurs as the water trickles down the string and how variables like the type of string and flow rate might impact the degree of aeration. The availability of oxygen is necessary in order for treatment to occur, so we needed to verify that aeration occurs for the current design of a string digester to be possible.



## Procedures
#### Apparatus
The experimental apparatus consists of a metal rod, microtubing, string (or yarn), small effluent collector, peristaltic pump, and deoxygenated solution (Fig. 1).

![schematic](https://github.com/rosiekrasnoff/CEE4530/blob/master/Final%20Project/schematic.PNG?raw=true)
Figure 1. Schematic of string aeration experiment.

1. Step up experiment as shown in Figure 1. Use a peristaltic pump installed with a microtubing head.
2. Cut an excess of microtubing and stretch one of the edges to be thin enough to go through the tabs for the peristaltic pump. Prepare the microtubing as is typical and install it into the peristaltic pump.
3. The purpose of the metal rod is to have access to the ceiling so make sure to obtain one that is long enough so that you can hook it onto the ceiling, but not too long that it will make the string too short.
4. Cut the string/yarn to be approximately an inch off the lab table once connected to the metal rod. In our set up this meant a string that was 2 meters long.
5. Tie the string/yarn onto the metal rod and hook it to the ceiling before moving further to make sure it is at a good length.
6. Carefully position and tape the microtubing to the string/yarn so that each droplet will fall directly onto said string/yarn. This is important because to test the aeration potential of a string digester, having the water droplets just fall directly into the effluent collector must be avoided.
7. Hang the metal rod-string/yarn-microtubing apparatus onto the ceiling.

#### Dissolved Oxygen (DO) Probe
1. Install the membrane cap on the Dissolved Oxygen Probe. You can refer to the [textbook](https://monroews.github.io/EnvEngLabTextbook/Gas_Transfer/Gas_Transfer.html#install-the-membrane-cap-on-the-dissolved-oxygen-probe) for a detailed procedure.
2. Calibrate the DO probe by referring to the [textbook](https://monroews.github.io/EnvEngLabTextbook/ProCoDA/ProCoDA.html#dissolved-oxygen-sensor-do).
3. Store the probe in a beaker with distilled water while running the trials.
4. The probe does not need to be calibrated again for the rest of the experimental period unless the probe readings seem to be off. The membrane cap should be dried after every experiment day and reinstalled before every experiment day.

#### Experimental Method
Test aeration potential for both the string and yarn at varying rpms with varying amounts of $Na_{2}SO_3$.
1. Set up the apparatus,
2. Make the deoxygenated solution by filling a 100 mL beaker with 1000 $u$L of the stock 0.1 $\frac{mg}{mL}$ $CoCl_2$ solution and filling the rest with distilled water. Then add the appropriate amount of $Na_{2}SO_3$ to reach the desired level of chemical oxygen demand (COD).
3. Pump the deoxygenated solution at a high revolution per minute (rpm) (between 50 and 100) to wet the string/yarn. The water won't trickle down properly if the string/yarn isn't wetted first. Do this for about 2 minutes or until visual inspection proves a wetted string. Make sure to use a different beaker than the designated effluent collector to collect the water, as this is not effluent that should be tested.
4. Lower the rpm to the testing pumping rate and let it run for 10 minutes at this lower rpm to allow for the flow rate to reach an stable state and to let all the liquid on the string that was from the higher pumping rate trickle off.
5. After running it for about 10 minutes, start the actual collection with the effluent collector until you have about 2 mL to make an accurate DO measurement. This can take anywhere from 5 minutes to an hour depending on the flow rate and the rate of evaporation.
6. Measure the DO by placing the DO probe in the effluent collector. In order to make an accurate measurement, constantly slightly wiggle and spin the probe around to keep it in motion because the DO probe consumes oxygen as it makes measurements so the concentration will fall if you allow it to sit in one place. It is important that one does not let it to stay motionless to avoid having the dissolved oxygen level fall and result in an inaccurate reading.
7. Repeat each trial at least twice.
8. Note that the deoxygenated solution will need to be remade every time you run the experiment, as it will reaerate to some degree over time. The solution can simply be dumped down the sink at the end of each experiment day since the $CoCl_2$ is diluted to such a low concentration.


## Results and Discussion
### Data Analysis

In order to look at the relationships between aeration and a couple other variables - COD, flow rate, string type - we conducted two different sets of experiments.

For the first set of trials, we tested the aeration potential for both the flat string and loopy yarn at three different levels of COD (from $Na_{2}SO_{3}$ added) while holding the flow rate constant at 1.75 $\frac{uL}{s}$. Because  wastewater typically has a BOD concentration of about 200 $\frac{mg}{L}$, we tested at an equivalent COD level as well as one lower and another higher. We were pleased to see that the effluent was essentially back to saturated levels after trickling down a solution with 20 $\frac{mg}{L}$ of COD (a very small amount). Additionally, the DO readings from testing 200 $\frac{mg}{L}$ showed that aeration was occurring to a level that there was oxygen present in the effluent. Lastly, testing with 503 $\frac{mg}{L}$ served as a sanity check as the effluent was basically deoxygenated after trickling down the string (Table 1). This makes sense since we were running the trial with very high levels of $Na_{2}SO_{3}$ and it would presumably take a lot of time/length of string before having significant levels of dissolved oxygen.

Table 1. Constant flow rate of 1.75 (uL/s)

|COD (from Na2SO3 in 100 mL water) | DO for flat string (mg/L) | DO for loopy yarn (mg/L)|
| ----- | ------------ | ---------- |
|**20 (mg/L)** (from 0.016 g  $Na_{2}SO_{3}$)| 7.2 6.7 | 5.7, 7.0, 7.0  |
|**200 (mg/L)** (from 0.158 g  $Na_{2}SO_{3}$)| 2.1, 5, 4.1 | 5.8, 6.7 |
|**503 (mg/L)** (from 0.397 g  $Na_{2}SO_{3}$)| 0.3 | 0.15, 1.0|

Ideally, we would want the string digester to run at an optimal flow rate that would be slow enough to allow for significant aeration to occur but fast enough to be an efficient wastewater treatment system. Thus, for the second set of trials, we tested the aeration potential of both string types at three different flow rates while holding the COD level constant by adding 158 mg of $Na_{2}SO_{3}$ across all trials. Unsurprisingly, we saw the highest levels of dissolved oxygen at the slowest flow rate of 1.75 $\frac{uL}{s}$ (Table 2). This was as expected since the solution had the most time for aeration to occur on the string/yarn. Although it was good to confirm that aeration can occur, this pumping rate may not result in a very efficient treatment. Additionally, in the case of the string, the two faster flow rates resulted in either very low levels or no dissolved oxygen in the effluent. For the loopy yarn, however, there were pretty significant levels of DO when running at the second flow rate. This is promising for future experiments since the yarn could allow for significant aeration in a reasonable amount of time. The yarn could allow for a higher flow rate to keep the treatment from being too slow and allowing the capacity of the system to be increased without compromising too much of the ability to aerate.

Table 2. Constant COD of **200 mg/L** (from 0.158 g  $Na_{2}SO_{3}$)

| Flow rate (uL/s)| DO for flat string (mg/L) | DO for loopy yarn (mg/L) |
| ----- | ------ | -------- |
|1.75 (uL/s)| 2.1, 5, 4.1 | 5.8, 6.7  |
|6.88 (uL/s)| 2.1, 2, 0.3 | 5.6, 5.05, 4.9, 4.5 |
|17.2 (uL/s) | 0.2, 0.3 | 0.5, 1.2, 1, 0 |

As expected, as the amount of Na2SO3 added increased, and therefore the COD increased there was less dissolved oxygen in the effluent (Figure 2). This makes sense because as the chemical oxygen demand in the influent increases, it requires more oxygen, more than may be available, to return the dissolved oxygen level in the solution to saturation.

![string_5rpm](https://github.com/rosiekrasnoff/CEE4530/blob/master/Final%20Project/DOvsCOD_string_errorbars.png?raw=true)

Figure 2. Plot of the dissolved oxygen levels in the effluent at varying levels of COD in the influent solution for the flat string. The flow rate was kept constant in these trials at 1.75 uL/second. Data from Table 1 above has been translated to a visual format by averaging all points at the same COD and showing standard deviation with error bars. For consistency, string data will be plotted in blue throughout the report.

Next, we repeated the same test with a different material - the loopy yarn. Again, as the amount of Na2SO3 added increased, there was less dissolved oxygen in the effluent (Figure 3).

![yarn_5rpm](https://github.com/rosiekrasnoff/CEE4530/blob/master/Final%20Project/DOvsCOD_yarn_errorbars.png?raw=true)

Figure 3. Plot of the dissolved oxygen levels in the effluent at varying levels of COD in the influent solution for the loopy yarn. The flow rate was kept constant in these trials at 1.75 uL/second. Data from Table 1 above has been translated to a visual format by averaging all points at the same COD and showing standard deviation with error bars. For consistency, yarn data will be plotted in green throughout the report.


As the pumping rate of the 200 mg/L COD solution increased, there was less dissolved oxygen in the effluent because there was less time for aeration to occur on the string (Figure 4). Thus, we can see higher levels of dissolved oxygen at the lowest flow rate of 1.75 $\frac{uL}{s}$. And at the highest flow rate of 17.2 $\frac{uL}{s}$, the effluent was essentially still deoxygenated.

![string_rpms](https://github.com/rosiekrasnoff/CEE4530/blob/master/Final%20Project/DOvsFlowRate_string_errorbars.png?raw=true)

Figure 4. Plot showing the DO concentration of the effluent of the flat string changing as the pumping rate was increased. For all data points, the COD in the solution was kept constant at 200 mg/L to model typical wastewater BOD. The data displayed above is shown in Table 2, and as in previous plots, data was averaged at each flow rate and standard deviation in data is shown by error bars.

Lastly, we tested the loopy yarn again under the same conditions and saw similar results. The effluent had lower levels of dissolved oxygen as the flow rate increased (Figure 5).

![yarn_rpms](https://github.com/rosiekrasnoff/CEE4530/blob/master/Final%20Project/DOvsFlowRate_yarn_errorbars.png?raw=true)

Figure 5. Plot showing the DO concentration of the effluent of the loopy yarn changing as the pumping rate was increased. COD in the solution was kept constant at 200 mg/L. Again, the data displayed above is shown in Table 2, and as in previous plots, data was averaged at each flow rate and standard deviation in data is shown by error bars.


Although both the string and yarn had similar trends of decreasing DO levels with increasing flow rates, the loopy yarn had higher levels of dissolved oxygen throughout the different trials (Figure 6). At the lower two flow rates, the effluent from the yarn was significantly more aerated than that from the string. This suggests that the yarn is a more suitable material for use in a string digester, as it could be able to accommodate a higher flow rate while still maintaining the desired level of treatment. The yarn also holds more liquid than the string, which is another way in which it would increase treatment, as each thread would be able to treat a higher volume.

We can attribute the superior aeration of the yarn to its hydrophilic characteristic and the "loopiness" that allows droplets of water to collect on the yarn and pause for a moment. This yarn's many loops and crevices throughout its entire length hold many water droplets, each of which act as a sort of mini CMFR. The more of these little CMFRs a string can support, the more effective a string digester would be. Thus, we recommend experimenting with other materials similar to the yarn to find one that would maximize efficiency.

![both](https://github.com/rosiekrasnoff/CEE4530/blob/master/Final%20Project/bothwERRORBARS_at_rpms.png?raw=true)

Figure 6. Combined plot comparing the results of the flat string and loopy yarn for experiments where flow rate was varied and COD was kept constant at 200 mg/L COD. This is a combination of Figures 4 and 5.


With both materials tested, dissolved oxygen levels increases with hydraulic residence time (Figure 7). This is logical since $\theta$ decreases as flow rates increases and thus, aeration increases as $\theta$ increases. Furthermore, the loopy yarn has a hydraulic residence time (~ 1.06) more than double that of the flat string (~ 0.44) at a flow rate of 17.2 uL/sec. This, too, supports the earlier observation that the loopy yarn is a better option for aeration.

![HRT](https://github.com/rosiekrasnoff/CEE4530/blob/master/Final%20Project/combinedHRT.png?raw=true)

Figure 7. Plot showing the DO changing with the hydraulic residence time for both the flat string and loopy yarn.

Another thing to note is the theoretical relationship between concentration of COD and hydraulic residence time. When the DO concentration is zero, COD would decrease linearly with $\theta$. Then, the DO levels begin to increase as aeration occurs, first exponentially and then slowing down over time to eventually approach saturation. As the DO levels increase, the rate of COD removal begins to decrease because of the increase in DO meaning that the driving gradient that is bringing oxygen into the water is lessening. COD would asymptotically approach 0 as DO approaches saturation.

From this lab, we were able to answer our main question of whether or not a string digester is possible from an aeration perspective and confirm that significant aeration can occur on a 2 meter string. As seen in the above results, aeration does occur  and there could be enough oxygen available to the wastewater on the string to allow for proper treatment.

## Conclusion

In this lab, we mainly tested for whether or not aeration occurs as the water trickles down the string. We can confidently report that, in regards to aeration, a string digester is possible since there is enough oxygen available on strings to allow for proper treatment of wastewater. However, our two types of experiments also answered how variables like the type of string, flow rate, and level of COD might impact the degree of aeration. We saw that compared to the flat string, the loopy yarn performed better in terms of aeration thanks to its many loops holding onto the water droplets. We would recommend furthering this conclusion and continuing to test similar materials in the future. In addition, we saw that as the flow rate increased, less aeration occurred and the effluent contained lower levels of DO. This was as expected since the solution spends less time on the string at higher flow rates. Likewise, the level of DO in the effluent decreased as the concentration of COD in the influent increased. This makes sense since it would take more time (and a longer string) to oxygenate higher levels of oxygen demand. Lastly, we delved a bit into the relationship between HRT and both DO and COD where we saw that DO increases with $\theta$ and COD decreases simultaneously.

## Suggestions/Comments

Throughout the lab, we faced a lot of issues with using the DO probe. Unfortunately, low flow rates and the DO probe's continuous consumption of oxygen made taking an accurate DO reading difficult. Ideally, we would have the outflow actively flowing over a DO probe to be able to have constant measurements, but that isn’t possible because our flow rate needs to be quite slow and we're measuring in a very small container with a limited amount of volume (~ 2 mL). Even with our "wiggle" method, the DO probe would continue to consume oxygen so we were never sure that our measurements were accurate. Thus, in the future, we would recommend getting micro DO probes if possible. Additionally, our string digester would often dry up during a trial due to evaporation, especially when running at slower flow rates, due to the lab environment. Moving forward, we would suggest running the experiment in a setting more similar to the real world in regards to humidity levels.


# Appendix
``` python
from aguaclara.core.units import unit_registry as u
import aguaclara.research.environmental_processes_analysis as epa
import aguaclara.core.physchem as pc
import aguaclara.core.utility as ut
import numpy as np
import matplotlib.pyplot as plt
from scipy import stats

#convert from mg O2 to mg NA2SO3
conv=7.897
#COD=(mass_NA2SO3/(100*u.mL)/conv).to(u.mg/u.L)

#Plot of DO vs COD for the string with error bars (flow rate is constant)
Na2SO3_string_5rpm = (np.array([0.016,0.016,0.159,0.159,0.159,0.397])*u.g).to(u.mg)
COD_string_5rpm = (Na2SO3_string_5rpm/(100*u.mL)/conv).to(u.mg/u.L)
DO_string_5rpm = np.array([7.2,6.7,2.1,5,4.1,0.3])*u.mg/u.L
DO_Sdata5_1=[7.2,6.7]
COD_S1=COD_string_5rpm[0].magnitude
DO_Sdata5_2=[2.1,5,4.1]
COD_S2=COD_string_5rpm[2].magnitude
DO_Sdata5_3=[0.3]
COD_S3=COD_string_5rpm[5].magnitude

COD_S_avg=np.array([COD_S1,COD_S2,COD_S3])
DO_S5_avg=np.array([np.average(DO_Sdata5_1),np.average(DO_Sdata5_2),np.average(DO_Sdata5_3)])
SD_S5_DO=np.array([np.std(DO_Sdata5_1),np.std(DO_Sdata5_2),np.std(DO_Sdata5_3)])

# Create plot
plt.errorbar(COD_S_avg, DO_S5_avg, yerr=SD_S5_DO,linestyle='None', marker='o', ecolor='r', elinewidth=1, capsize=3)
plt.xlabel('COD (mg/L)');
plt.ylabel('DO (mg/L)');
plt.savefig('C:/Users/Jiwon Lee/github/rosie/Final Project/DOvsCOD_string_errorbars.png')
plt.show()



#Plot of DO vs COD for the yarn with error bars (flow rate is constant)
Na2SO3_yarn_5rpm = (np.array([0.016,0.016,0.016,0.158,0.158,0.158,0.397,0.397])*u.g).to(u.mg)
COD_yarn_5rpm = (Na2SO3_yarn_5rpm/(100*u.mL)/conv).to(u.mg/u.L)
DO_yarn_5rpm = np.array([5.7,7,7,3.3,5.8,6.7,.15,1])*u.mg/u.L
DO_Ydata5_1=[5.7,7,7]
COD_Y1=COD_yarn_5rpm[0].magnitude
DO_Ydata5_2=[3.3,5.8,6.7]
COD_Y2=COD_yarn_5rpm[3].magnitude
DO_Ydata5_3=[.15,1]
COD_Y3=COD_yarn_5rpm[6].magnitude

COD_Y_avg=np.array([COD_Y1,COD_Y2,COD_Y3])
DO_Y5_avg=np.array([np.average(DO_Ydata5_1),np.average(DO_Ydata5_2),np.average(DO_Ydata5_3)])
SD_Y5_DO=np.array([np.std(DO_Ydata5_1),np.std(DO_Ydata5_2),np.std(DO_Ydata5_3)])

# Create plot
plt.errorbar(COD_Y_avg, DO_Y5_avg, yerr=SD_Y5_DO,linestyle='None', marker='o', elinewidth=1, capsize=3,mfc='g', ecolor='k', mec='g')
plt.xlabel('COD (mg/L)');
plt.ylabel('DO (mg/L)');
plt.savefig('C:/Users/Jiwon Lee/github/rosie/Final Project/DOvsCOD_yarn_errorbars.png')
plt.show()


#Plot of DO vs flow rate for the string with error bars (COD is constant)
Flowrate_string = np.array([.105,.105,.105,0.413,0.413,0.413,1.0315,1.0315])*u.mL/u.min
Flowrate_string = Flowrate_string.to(u.uL/u.s)
DO_string = np.array([2.1,5,4.1 ,2.1,2,0.3,0.2,0.3])*u.mg/u.L
DO_Sdata_1=[2.1,5,4.1]
FR_S1=(.105*u.mL/u.min).to(u.uL/u.s).magnitude
DO_Sdata_2=[2.1,2,0.3]
FR_S2=(.413*u.mL/u.min).to(u.uL/u.s).magnitude
DO_Sdata_3=[0.2,0.3]
FR_S3=(1.0315*u.mL/u.min).to(u.uL/u.s).magnitude

Flowrate_S_avg=np.array([FR_S1,FR_S2,FR_S3])
DO_S_avg=np.array([np.average(DO_Sdata_1),np.average(DO_Sdata_2),np.average(DO_Sdata_3)])
SD_S_DO=np.array([np.std(DO_Sdata_1),np.std(DO_Sdata_2),np.std(DO_Sdata_3)])

# Create plot
plt.errorbar(Flowrate_S_avg, DO_S_avg, yerr=SD_S_DO,linestyle='None', marker='o', ecolor='r', elinewidth=1, capsize=3)
plt.xlabel('Flow Rate (uL/sec)');
plt.ylabel('DO (mg/L)');
plt.savefig('C:/Users/Jiwon Lee/github/rosie/Final Project/DOvsFlowRate_string_errorbars.png')
plt.show()


#Plot of DO vs flow rate for the yarn with error bars (COD is constant)
Flowrate_yarn = np.array([.105,.105,.413,.413,.413,.413,1.0315,1.0315,1.0315,1.0315])*u.mL/u.min
Flowrate_yarn = Flowrate_yarn.to(u.uL/u.s)
DO_yarn = np.array([5.8,6.7,5.6,5.05,4.9,4.5,0.5,1.2,1,0])*u.mg/u.L
DO_Ydata_1=[5.8,6.7]
FR_Y1=(.105*u.mL/u.min).to(u.uL/u.s).magnitude
DO_Ydata_2=[5.6,5.05,4.9,4.5]
FR_Y2=(.413*u.mL/u.min).to(u.uL/u.s).magnitude
DO_Ydata_3=[0.5,1.2,1,0]
FR_Y3=(1.0315*u.mL/u.min).to(u.uL/u.s).magnitude

Flowrate_Y_avg=np.array([FR_Y1,FR_Y2,FR_Y3])
DO_Y_avg=np.array([np.average(DO_Ydata_1),np.average(DO_Ydata_2),np.average(DO_Ydata_3)])
SD_Y_DO=np.array([np.std(DO_Ydata_1),np.std(DO_Ydata_2),np.std(DO_Ydata_3)])

# Create plot
plt.errorbar(Flowrate_Y_avg, DO_Y_avg, yerr=SD_Y_DO,linestyle='None', marker='o', elinewidth=1, capsize=3,mfc='g', ecolor='k', mec='g')
plt.xlabel('Flow Rate (uL/sec)');
plt.ylabel('DO (mg/L)');
plt.savefig('C:/Users/Jiwon Lee/github/rosie/Final Project/DOvsFlowRate_yarn_errorbars.png')
plt.show()


# Combine both plots to compare!
plt.errorbar(Flowrate_S_avg, DO_S_avg, yerr=SD_S_DO,linestyle='None', marker='o', ecolor='r', elinewidth=1,capsize=3, label='string')
plt.errorbar(Flowrate_Y_avg, DO_Y_avg, yerr=SD_Y_DO,linestyle='None', mfc='g', marker='o', ecolor='k', elinewidth=1, mec='g', capsize=3, label='yarn')
plt.xlabel(r'Flow Rate (uL/sec)');
plt.ylabel(r'DO (mg/L)');
plt.legend()
plt.savefig('C:/Users/Jiwon Lee/github/rosie/Final Project/bothwERRORBARS_at_rpms.png')
plt.show()



# HRT PLOTS
# DO vs HRT for string
String_V = 0.77*u.mL
Flowrate_string_avg = np.array([.105,0.413,1.0315])*u.mL/u.min
Flowrate_string_avg = Flowrate_string_avg.to(u.uL/u.s)
HRT = String_V/Flowrate_string_avg
DO_string_avg = np.array([np.average([2.1,5]),np.average([4.1,2.1,2,0.3]),np.average([0.2,0.3])])*u.mg/u.L
plt.plot(HRT, DO_string_avg, 'o', label='string')
plt.xlabel(r'HRT ($\theta$)');
plt.ylabel(r'DO (mg/L)');
plt.title('HRT vs DO of Flat String')
#plt.savefig('C:/Users/Jiwon Lee/github/rosie/Final Project/stringHRT.png')
#plt.show()

# DO vs HRT for yarn
Yarn_V = 1.858*u.mL
Flowrate_yarn_avg = np.array([.105,.413,1.0315])*u.mL/u.min
Flowrate_yarn_avg = Flowrate_yarn_avg.to(u.uL/u.s)
HRT_yarn = Yarn_V/Flowrate_yarn_avg
DO_yarn_avg = np.array([np.average([5.8,6.7]),np.average([5.6,5.01,4.9,4.5]),np.average([0.5,1.2,1,0])])*u.mg/u.L
plt.plot(HRT_yarn, DO_yarn_avg, 'og', label='yarn')
plt.xlabel(r'HRT $\theta$');
plt.ylabel(r'DO (mg/L)');
plt.title('HRT vs DO of Loopy Yarn')
#plt.savefig('C:/Users/Jiwon Lee/github/rosie/Final Project/yarnHRT.png')
#plt.show()

# Combine both HRT plots
plt.plot(HRT, DO_string_avg, 'oc', label='string')
plt.plot(HRT_yarn, DO_yarn_avg, 'og', label='yarn')
plt.xlabel(r'HRT ($\theta$)');
plt.ylabel(r'DO (mg/L)');
plt.legend()
plt.savefig('C:/Users/Jiwon Lee/github/rosie/Final Project/combinedHRT.png')
plt.show()











## ***OLD CODE*** FOR PLOTS WITHOUT AVERAGES AND ERROR BARS, saved for reference
# Constant Na2SO3
# Data for flat string
Flowrate_string = np.array([.105,.105,.105,0.413,0.413,0.413,1.0315,1.0315])*u.mL/u.min
Flowrate_string = Flowrate_string.to(u.uL/u.s)
DO_string = np.array([2.1,5,4.1,2.1,2,0.3,0.2,0.3])*u.mg/u.L
# Create plot
plt.plot(Flowrate_string, DO_string, 'o', label='measured DO using string at various flow rates')
plt.xlabel(r'Flow Rate $\frac{uL}{s}$');
plt.ylabel(r'DO (mg/L)');
plt.legend()
#plt.show()

# DO data for loopy yarn
Flowrate_yarn = np.array([.105,.105,.413,.413,.413,.413,1.0315,1.0315,1.0315,1.0315])*u.mL/u.min
Flowrate_yarn = Flowrate_yarn.to(u.uL/u.s)
DO_yarn = np.array([5.8,6.7,5.6,5.01,4.9,4.5,0.5,1.2,1,0])*u.mg/u.L
# Create plot
plt.plot(Flowrate_yarn, DO_yarn, 'o', label='measured DO using yarn at various flow rates')
plt.xlabel(r'Flow Rate $\frac{uL}{s}$');
plt.ylabel(r'DO (mg/L)');
plt.legend()
#plt.show()

# Combine both plots
plt.plot(Flowrate_string, DO_string, 'og', label='string')
plt.plot(Flowrate_yarn, DO_yarn, 'ob', label='yarn')
plt.xlabel(r'Flow Rate $\frac{uL}{s}$');
plt.ylabel(r'DO (mg/L)');
plt.legend()
#plt.show()

# Flow rate = 5 rpm
# Data for flat string, plotted without averaging
Na2SO3_string_5rpm = (np.array([0.016,0.016,0.159,0.159,0.159,0.397])*u.g).to(u.mg)
COD_string_5rpm = (Na2SO3_string_5rpm/(100*u.mL)/conv).to(u.mg/u.L)
DO_string_5rpm = np.array([7.2,6.7,2.1,5,4.1,0.3])*u.mg/u.L
plt.plot(COD_string_5rpm, DO_string_5rpm, 'o', label='measured DO using string at 5rpm')
plt.xlabel(r'COD (mg/L)');
plt.ylabel(r'DO ($\frac{mg}{L}$)');
plt.legend()
#plt.show()

# Flat String at 5 RPM with Averaged Values
Na2SO3_string_5rpm_avg = (np.array([0.016,0.159,0.397])*u.g).to(u.mg)
DO_string_5rpm_avg = np.array([np.average([7.2,6.7]),np.average([2.1,5,4.1]),0.3])*u.mg/u.L
plt.plot(Na2SO3_string_5rpm_avg, DO_string_5rpm_avg, 'o', label='measured DO using string at 5rpm')
plt.xlabel(r'$Na_{2}SO_{3}$ (mg)');
plt.ylabel(r'DO (mg/L)');
plt.legend()
#plt.show()

# Data for loopy yarn
# 3.3 point might not be good!!!
Na2SO3_yarn_5rpm = (np.array([0.016,0.016,0.016,0.158,0.158,0.158,0.397,0.397])*u.g).to(u.mg)
COD_yarn_5rpm = (Na2SO3_yarn_5rpm/(100*u.mL)/conv).to(u.mg/u.L)
DO_yarn_5rpm = np.array([5.7,7,7,3.3,5.8,6.7,.15,1])*u.mg/u.L
plt.plot(COD_yarn_5rpm, DO_yarn_5rpm, 'o', label='measured DO using yarn at 5 rpm')
plt.xlabel(r'COD (mg/L)');
plt.ylabel(r'DO (mg/L)');
plt.legend()
#plt.show()

# Combine both plots
plt.plot(COD_string_5rpm, DO_string_5rpm, 'og', label='string')
plt.plot(COD_yarn_5rpm, DO_yarn_5rpm, 'ob', label='yarn')
plt.xlabel(r'COD (mg/L)');
plt.ylabel(r'DO (mg/L)');
plt.legend()
#plt.show()

```
